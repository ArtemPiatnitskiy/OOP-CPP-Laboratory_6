# Лабораторная работа №6

## Тема: "***<u>Паттерны проектирования</u>***"

### Цель:

- Закрепление паттернов SOLID

### Порядок выполнения работы:

- Ознакомиться с теоретическим материалом

- Реализовать задание в соответствии с вариантом (Вариант 19)

- Написать Unit-тесты с использованием Google Test

- Отчитаться по выполненной работе путём демонстрации работающей программы на тестовых наборах данных (как подготовленных самостоятельно, так и предложенных преподавателем) и ответов на вопросы преподавателя (как из числа контрольных, так и по реализации программы).

### Требования к программе:

Вы разрабатываете редактор подземелья для новой RPG игры Balagur Fate 3. Ваша задача сделать программу, которая позволит моделировать базовые локации, расставляя на них NPC (non-player characters).

Редактор должен позволять делать следующие действия:

1. Добавлять новые NPC по разным координатам (типы объектов предопределены заданием)
   
   - NPC размещаются в квадрате `0 <= x <= 500` метров, `0 <= y <= 500` метров
   
   - У каждого типа объекта помимо координат должно быть уникальное имя.

2. Сохранять объекты в файл и загружать из файла

3. Печатать перечень объектов на экран (с типом объектов, координатами и именем)

4. Запускать боевой режим с указанием дальности, на которой могут сражаться `NPC`. В боевом режиме `NPC` начинают сражаться каждый с каждым (если дальность позволяет), проигравший `NPC` – удаляется. При этом погибнуть могут и оба `NPC`.

При создании программы обязательно использовать паттерны:

- Какой-нибудь из вариантов Factory для создания NPC и загрузки NPC из файла

- `Visitor` – для проведения цикла сражения

- `Observer` – для печати событий о совершенных убийствах. Сделать два класса `Observer` – для 
  записи в файл `log.txt` и для печати на экран.

## Условие задачи:

###### Создать программу, которая реализует следующую стратегию работы `memory_resource`

| Объекты  | Правило совместимости                                                               |
|:--------:|:-----------------------------------------------------------------------------------:|
| Медведь  | Медведь ест всех кроме медведей                                                     |
| Выпь     | Выпь никого не обижает                                                              |
| Выхухоль | Выхухоль убивает медведей (потому что она наш эндемик, а медведи они всякие бывают) |

---

## Структура проекта

```
tasks/Laboratory_6/
├── CMakeLists.txt
├── main.cpp
├── test_main.cpp
├── README.md
├── materials.md
│
├── include/
│ ├── npc.h
│ ├── bear.h
│ ├── bittern.h
│ ├── desman.h
│ ├── factory.h
│ ├── arena.h
│ ├── visitor.h
│ ├── combat_visitor.h
│ ├── observer.h
│ ├── console_observer.h
│ └── file_observer.h
│
├── src/
│ ├── npc.cpp
│ ├── bear.cpp
│ ├── bittern.cpp
│ ├── desman.cpp
│ ├── factory.cpp
│ ├── arena.cpp
│ └── combat_visitor.cpp
│
└── tests/
├── Laboratory_6_test_npc.cpp
├── Laboratory_6_test_factory.cpp
├── Laboratory_6_test_arena.cpp
├── Laboratory_6_test_combat.cpp
├── Laboratory_6_test_file_loading.cpp
└── test_data_npcs.txt
```

## Сборка и запуск проекта

**Сборка:**

```bash
# Создание директории для сборки
mkdir build
cd build

# Конфигурация проекта
cmake ..

# Сборка проекта
cmake --build .
```

**Запуск:**

```bash
./Laboratory_5.exe
```

## Запуск тестов:

```bash
# Из директории build/tasks/Laboratory_2
./test_[name_test]_Laboratory_5

# Или через CTest
ctest --verbose
```
